#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                theia.h                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (BACK) verify creating background entries                          0s   create          BACK_create, BACK_purge                                                      ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     initialize the system                PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char  x_recd    [LEN_RECD]  = "";                                                                                                                                                                                          

   COND       verify initial state                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... check back count                 BACK__unit                  "count"               , 0                                                                             s_equal     BACK count       : 0                                                                                 
     get      ... check entry                      BACK__unit                  "entry"               , 0                                                                             s_equal     BACK entry  ( 0) : ·  ·       ·                ·        0                                            
     get      ... check entry                      BACK__unit                  "entry"               , 1                                                                             s_equal     BACK entry  ( 1) : ·  ·       ·                ·        0                                            
     get      ... check entry                      BACK__unit                  "entry"               , 2                                                                             s_equal     BACK entry  ( 2) : ·  ·       ·                ·        0                                            

   COND       verify a quick success                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     create the input recd                - - - - - - - - - - - - -   strlcpy (x_recd, "background § p § p_purp § purple               § õ4400aa § õ4400aa §", LEN_RECD);                                                                          
     exec     create a background                  BACK_create                 x_recd                                                                                                i_equal     0                                                                                                    
     get      ... check back count                 BACK__unit                  "count"               , 0                                                                             s_equal     BACK count       : 1                                                                                 
     get      ... check entry                      BACK__unit                  "entry"               , 0                                                                             s_equal     BACK entry  ( 0) : p  p_purp  purple           õ4400aa  4456618                                      
     get      ... check entry                      BACK__unit                  "entry"               , 1                                                                             s_equal     BACK entry  ( 1) : ·  ·       ·                ·        0                                            
     get      ... check entry                      BACK__unit                  "entry"               , 2                                                                             s_equal     BACK entry  ( 2) : ·  ·       ·                ·        0                                            

   COND       attempt to create a duplicate                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create a background                  BACK_create                 x_recd                                                                                                i_lesser    0                                                                                                    
     get      ... check back count                 BACK__unit                  "count"               , 0                                                                             s_equal     BACK count       : 1                                                                                 
     get      ... check entry                      BACK__unit                  "entry"               , 0                                                                             s_equal     BACK entry  ( 0) : p  p_purp  purple           õ4400aa  4456618                                      
     get      ... check entry                      BACK__unit                  "entry"               , 1                                                                             s_equal     BACK entry  ( 1) : ·  ·       ·                ·        0                                            
     get      ... check entry                      BACK__unit                  "entry"               , 2                                                                             s_equal     BACK entry  ( 2) : ·  ·       ·                ·        0                                            

   COND       attempt with the wrong type record                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     create the input recd                - - - - - - - - - - - - -   strlcpy (x_recd, "theme      § 95 § ......"                                            , LEN_RECD);                                                                          
     exec     create a background                  BACK_create                 x_recd                                                                                                i_lesser    0                                                                                                    
     get      ... check back count                 BACK__unit                  "count"               , 0                                                                             s_equal     BACK count       : 1                                                                                 
     get      ... check entry                      BACK__unit                  "entry"               , 0                                                                             s_equal     BACK entry  ( 0) : p  p_purp  purple           õ4400aa  4456618                                      
     get      ... check entry                      BACK__unit                  "entry"               , 1                                                                             s_equal     BACK entry  ( 1) : ·  ·       ·                ·        0                                            
     get      ... check entry                      BACK__unit                  "entry"               , 2                                                                             s_equal     BACK entry  ( 2) : ·  ·       ·                ·        0                                            

   COND       attempt with a comment                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     create the input recd                - - - - - - - - - - - - -   strlcpy (x_recd, "## this is a very nice comment"                                      , LEN_RECD);                                                                          
     exec     create a background                  BACK_create                 x_recd                                                                                                i_lesser    0                                                                                                    
     get      ... check back count                 BACK__unit                  "count"               , 0                                                                             s_equal     BACK count       : 1                                                                                 
     get      ... check entry                      BACK__unit                  "entry"               , 0                                                                             s_equal     BACK entry  ( 0) : p  p_purp  purple           õ4400aa  4456618                                      
     get      ... check entry                      BACK__unit                  "entry"               , 1                                                                             s_equal     BACK entry  ( 1) : ·  ·       ·                ·        0                                            
     get      ... check entry                      BACK__unit                  "entry"               , 2                                                                             s_equal     BACK entry  ( 2) : ·  ·       ·                ·        0                                            

   COND       attempt with a null                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create a background                  BACK_create                 NULL                                                                                                  i_lesser    0                                                                                                    
     get      ... check back count                 BACK__unit                  "count"               , 0                                                                             s_equal     BACK count       : 1                                                                                 
     get      ... check entry                      BACK__unit                  "entry"               , 0                                                                             s_equal     BACK entry  ( 0) : p  p_purp  purple           õ4400aa  4456618                                      
     get      ... check entry                      BACK__unit                  "entry"               , 1                                                                             s_equal     BACK entry  ( 1) : ·  ·       ·                ·        0                                            
     get      ... check entry                      BACK__unit                  "entry"               , 2                                                                             s_equal     BACK entry  ( 2) : ·  ·       ·                ·        0                                            

   COND       verify a second entry                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     create the input recd                - - - - - - - - - - - - -   strlcpy (x_recd, "background § r § r_redd § red                  § õ990000 § õ660000 §", LEN_RECD);                                                                          
     exec     create a background                  BACK_create                 x_recd                                                                                                i_equal     0                                                                                                    
     get      ... check back count                 BACK__unit                  "count"               , 0                                                                             s_equal     BACK count       : 2                                                                                 
     get      ... check entry                      BACK__unit                  "entry"               , 0                                                                             s_equal     BACK entry  ( 0) : p  p_purp  purple           õ4400aa  4456618                                      
     get      ... check entry                      BACK__unit                  "entry"               , 1                                                                             s_equal     BACK entry  ( 1) : r  r_redd  red              õ990000  10027008                                     
     get      ... check entry                      BACK__unit                  "entry"               , 2                                                                             s_equal     BACK entry  ( 2) : ·  ·       ·                ·        0                                            

   COND       verify purging the records                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call purge                           BACK_purge                                                                                                                        i_equal     0                                                                                                    
     get      ... check back count                 BACK__unit                  "count"               , 0                                                                             s_equal     BACK count       : 0                                                                                 
     get      ... check entry                      BACK__unit                  "entry"               , 0                                                                             s_equal     BACK entry  ( 0) : ·  ·       ·                ·        0                                            
     get      ... check entry                      BACK__unit                  "entry"               , 1                                                                             s_equal     BACK entry  ( 1) : ·  ·       ·                ·        0                                            
     get      ... check entry                      BACK__unit                  "entry"               , 2                                                                             s_equal     BACK entry  ( 2) : ·  ·       ·                ·        0                                            

   COND       wrap up testing                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap up                              PROG__unit_end                                                                                                                    i_equal     0                                                                                                    


